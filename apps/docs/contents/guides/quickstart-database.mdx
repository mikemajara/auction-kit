---
title: "Quick Start Database"
description: "Start testing the database layer in 5 minutes"
order: 1
category: "guides"
---



## Overview

This guide walks through the manual database test script. It provisions PostgreSQL, runs the Drizzle integration test, and validates a second-price sealed-bid auction from bid creation through settlement.

The script verifies that:

1. A second-price auction is created.
2. Two items (VIP Seat + General Admission) are registered for that auction.
3. Three bidders join the auction.
4. Bids are placed against the VIP Seat item by UUID.
5. The auction is closed, resolved, and pays the second-highest bid.
6. Items appear in the reported auction state.

## Run the manual test

```bash
# 1. Make sure Docker is running
docker-compose ps

# 2. Run the test
cd packages/drizzle
DATABASE_URL="postgres://postgres:postgres@localhost:5432/auction_kit_dev" pnpm test:manual
```

## Default environment configuration

- **PostgreSQL 16** on port 5432
- **Database**: `auction_kit_dev`
- **Username**: `postgres`
- **Password**: `postgres`

## Inspecting the database

### Option 1: Drizzle Studio (Visual GUI)

```bash
cd packages/drizzle
DATABASE_URL="postgres://postgres:postgres@localhost:5432/auction_kit_dev" pnpm db:studio
```

Opens at http://localhost:4983

### Option 2: psql Command Line

```bash
docker exec -it auction-kit-db psql -U postgres -d auction_kit_dev

# Then run queries:
\dt                          # List tables
SELECT * FROM auctions;      # See auctions
SELECT * FROM items;         # See catalog
SELECT * FROM bidders;       # See bidders
SELECT * FROM bids;          # See bids  
SELECT * FROM settlements;   # See results
\q                           # Exit
```

### Option 3: Any Postgres GUI Client

Use these credentials:
- **Host**: localhost
- **Port**: 5432
- **Database**: auction_kit_dev
- **Username**: postgres
- **Password**: postgres

## Test variations

### First-Price Auction

Modify the test to use first-price:

```typescript
// In test-manual.ts, change:
const auction = await createAuction(db, {
  type: 'first-price',  // Changed from 'second-price'
  tieBreak: 'timestamp',
  multiUnit: false,
})
```

Run again to compare first-price versus second-price outcomes.

### Multi-Unit Auction

Allow multiple winners:

```typescript
const auction = await createAuction(db, {
  type: 'first-price',
  tieBreak: 'timestamp',
  multiUnit: true,  // Allow multiple winners
})

// Add tied bids at $200...
```

### Random Tie-Breaking

```typescript
const auction = await createAuction(db, {
  type: 'first-price',
  tieBreak: 'random',  // Random instead of timestamp
  multiUnit: false,
})

// When resolving:
const result = await resolveAuction(db, auction.id, 12345) // Seed for reproducibility
```

## Cleanup

### Reset database (keep container):

```bash
docker exec -it auction-kit-db psql -U postgres -d auction_kit_dev -c "DROP SCHEMA public CASCADE; CREATE SCHEMA public;"

# Then re-push schema:
cd packages/drizzle
DATABASE_URL="postgres://postgres:postgres@localhost:5432/auction_kit_dev" pnpm db:push
```

### Stop everything:

```bash
# Stop container (keeps data)
docker-compose stop

# Stop and remove everything
docker-compose down -v
```

## Example output

Your last test showed:

```
Winner: Bob
Item: VIP Seat
Original bid: $200
Pays: $150
Reason: second-highest bid becomes the settlement price

Result: Correct winner and settlement captured
```

## Next steps

Now that the database layer works, you can:

1. **Use it in your app** right now!
   ```typescript
   import { createAuction, placeBid, resolveAuction } from '@auction-kit/drizzle'
   // Use in Next.js, Express, Hono, etc.
   ```

2. **Add real-time features**
   - Supabase subscriptions
   - Socket.io
   - Polling

3. **Build the API layer**
   - Hono REST API routes
   - Cloudflare Workers deployment

## Additional resources

- **[Testing Guide](/docs/guides/testing)** - Detailed testing guide
- **[Drizzle API Reference](/docs/api/drizzle)** - API reference

---
